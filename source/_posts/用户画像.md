---
title: å¤§æ•°æ®ç¼–ç¨‹ç¬¬ä¸€å¤©
date: 2021-05-11 18:15:16
tag: python spark
typora-root-url: ..
---



å› ä¸ºæœ¬ç§‘ä¸“ä¸šæ˜¯å¤§æ•°æ®çš„ï¼Œä½†æ˜¯ä¸‰å¹´ä¸‹æ¥å¥½åƒå¯¹å¤§æ•°æ®æ²¡æœ‰ç‰¹åˆ«æ·±çš„äº†è§£ï¼Œæ‰€ä»¥æœ€è¿‘æ‰“ç®—è·Ÿç€Bç«™ä¸Šçš„æ•™ç¨‹å­¦ä¸€æ‰‹å¤§æ•°æ®çš„é¡¹ç›®ã€‚æ˜¯[é»‘é©¬ç¨‹åºå‘˜_å¤§æ•°æ®å®æˆ˜ä¹‹ç”¨æˆ·ç”»åƒä¼ä¸šçº§é¡¹ç›®,å¿«é€Ÿè¿›å…¥500å¼ºä¼ä¸šçš„æ·å¾„_å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibili](https://www.bilibili.com/video/BV1Mp4y1x7y7?t=332)ç”¨åˆ°äº†sparkçš„ç›¸å…³çŸ¥è¯†ã€‚

# ä»€ä¹ˆæ˜¯ç”¨æˆ·ç”»åƒ

ç”¨æˆ·ç”»åƒé€šå¸¸åº”ç”¨äºè¥é”€æ¨å¹¿å’Œä¸ªæ€§åŒ–æ¨èã€‚

1. æ•°æ®ä»“åº“
   - ç¦»çº¿æ•°æ®ä»“åº“ï¼Œä¾‹å¦‚ç‚¹å‡»æµæ—¥å¿—æ•°æ®
   - å®æ—¶æ•°æ®ä»“åº“
2. ç”¨æˆ·ç”»åƒ
   - ä»¥ç”¨æˆ·ä¸ºä¸»é¢˜ï¼Œå°†ç”¨æˆ·æ•°æ®è¿›è¡Œæ ‡ç­¾åŒ–ï¼Œç»™ç”¨æˆ·æ‰“ä¸Šæ ‡ç­¾ï¼Œè·å–ç”¨æˆ·ç¾¤ä½“å’Œç”»åƒ
3. æ¨å¹¿è¥é”€å’Œä¸ªæ€§åŒ–æ¨è
   - ä½¿ç”¨ç”¨æˆ·ç”»åƒçš„æ ‡ç­¾æ•°æ®

[ç”¨æˆ·ç”»åƒï¼šå°†ç”¨æˆ·æ•°æ®æ ‡ç­¾åŒ–ï¼Œç»™ç”¨æˆ·æ‰“ä¸Šæ ‡ç­¾ã€‚]()

> ç”¨æˆ·æ•°æ®æœ‰å“ªäº›
>
> - åŸºæœ¬ä¿¡æ¯æ•°æ®
>   - åŸºäºåŸºæœ¬ä¿¡æ¯æ•°æ®æ„å»ºæ ‡ç­¾ï¼Œç§°ä¸º`User Personal`
> - ä½¿ç”¨APPæˆ–ç½‘ç«™äº§ç”Ÿæ•°æ®
>   - æµé‡æ—¥å¿—æ•°æ®ã€è®¢å•æ•°æ®ã€è´­ç‰©è½¦æ•°æ®ã€æ”¶è—æ•°æ®
>   - æ„å»ºæ ‡ç­¾ï¼Œç§°ä¸º`User Profile`



**é‡ç‚¹æ¥äº†**ï¼šç»è¿‡æˆ‘å‡ å¤©çš„è§‚å¯Ÿä»¥åŠæœç´¢ï¼Œå‘ç°æ²¡æœ‰åŠæ³•è·å–è¿™ä¸ªæ•™ç¨‹ç›¸å…³çš„èµ„æ–™ã€‚æ‰€ä»¥åˆåªèƒ½è‡ªå·±ä¸€æ­¥æ­¥å­¦ä¹ äº†ã€‚ğŸ˜”ï¼Œå¤ªéš¾äº†ã€‚ç›®å‰å°±æ˜¯ä¸€è¾¹å¿«é€Ÿçœ‹è§†é¢‘ä¸€è¾¹åŠªåŠ›æ‰¾é€‚åˆè‡ªå·±çš„é¡¹ç›®ã€‚æ‰€ä»¥æ¥ä¸‹æ¥è®°å½•çš„éƒ½æ˜¯æˆ‘è‡ªå·±çš„å­¦ä¹ è¿‡ç¨‹ã€‚

# æ­å»ºå¤§æ•°æ®ç¯å¢ƒ

ç¬¬ä¸€æ¬¡çŸ¥é“å¯ä»¥ä½¿ç”¨ClouderaManageræˆ–è€…Ambariç›´æ¥å¯¹å¤§æ•°æ®å¹³å°è¿›è¡Œæ­å»ºã€‚æœ¬æ–‡ä½¿ç”¨CMå®‰è£…CDHä»è€Œå¯¹å¤§æ•°æ®å¹³å°è¿›è¡Œå®‰è£…ä»¥åŠç®¡ç†ã€‚

é¦–å…ˆä½¿ç”¨VMwareæ­å»ºäº†ä¸‰ä¸ªCentosç³»ç»Ÿçš„ä¸»æœºï¼Œå¹¶é…ç½®äº†å…¬ç½‘ipåœ°å€ã€‚å…¶ä¸­åºŸäº†å¥½å¤§çš„åŠ²ç”¨æ¥é…ç½®ï¼Œä¸»è¦å‚è€ƒäº†ä¸‹é¢çš„æ–‡ç« [ ä¸€ã€Vmwareè™šæ‹Ÿæœºè®¾ç½®å›ºå®šIPåœ°å€_åŠä¸ªè¥¿ç“œ-CSDNåšå®¢](https://blog.csdn.net/chsong888/article/details/79358959)

ä¹‹åæ ¹æ®[clouderaç¯å¢ƒæ­å»º_æ‰£è„šå°ç”Ÿ-CSDNåšå®¢_cloudera](https://blog.csdn.net/m0_38017084/article/details/82218559?utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-2.control&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-2.control)å®‰è£…Clouderaç¯å¢ƒã€‚



## é›†ç¾¤åŒæ­¥è„šæœ¬

æ ¹æ®ç½‘ä¸Šçš„å…¶ä»–èµ„æ–™ï¼Œè¡¥å……ä¸€ä¸‹åšå®¢ä¸­æ²¡æœ‰çš„ï¼Œå¦‚ä½•è®¾ç½®é›†ç¾¤åŒæ­¥è„šæœ¬ã€‚ä¸è¿‡åœ¨è®¾ç½®é›†ç¾¤åŒæ­¥è„šæœ¬ä¹‹å‰ï¼Œæœ€å¥½å…ˆè¿›è¡Œ**SSHå…å¯†ç™»å½•**ã€‚

è¿™æ˜¯éœ€è¦è‡ªå·±å®Œæˆä¸€ä¸ªè„šæœ¬çš„ï¼Œä»è€Œä¹‹åæ–¹ä¾¿è°ƒç”¨ã€‚

å…·ä½“ä»£ç å³è¿è¡Œç»“æœå¦‚ä¸‹

### ç¼–å†™é›†ç¾¤åŒæ­¥è‡ªè¡Œå‘½ä»¤çš„è„šæœ¬

```
[root@node101 ~]# vi /usr/local/bin/xcall.sh
[root@node101 ~]# 
[root@node101 ~]# chmod +x /usr/local/bin/xcall.sh
[root@node101 ~]# 
[root@node101 ~]# more `which xcall.sh`
#!/bin/bash
#@author :yinzhengjie
#blog:http://www.cnblogs.com/yinzhengjie
#EMAIL:y1053419035@qq.com


#åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ä¼ å‚
if [ $# -lt 1 ];then
        echo "è¯·è¾“å…¥å‚æ•°"
        exit
fi

#è·å–ç”¨æˆ·è¾“å…¥çš„å‘½ä»¤
cmd=$@

for (( i=101;i<=103;i++ ))
do
        #ä½¿ç»ˆç«¯å˜ç»¿è‰² 
        tput setaf 2
        echo ============= node${i}.yinzhengjie.org.cn : $cmd ============
        #ä½¿ç»ˆç«¯å˜å›åŸæ¥çš„é¢œè‰²ï¼Œå³ç™½ç°è‰²
        tput setaf 7
        #è¿œç¨‹æ‰§è¡Œå‘½ä»¤
        ssh node${i}.yinzhengjie.org.cn  $cmd
        #åˆ¤æ–­å‘½ä»¤æ˜¯å¦æ‰§è¡ŒæˆåŠŸ
        if [ $? == 0 ];then
                echo "å‘½ä»¤æ‰§è¡ŒæˆåŠŸ"
        fi
done
[root@node101 ~]# 
[root@node101 ~]# xcall.sh ls -d /home/yinzhengjie/
============= node101.yinzhengjie.org.cn : ls -d /home/yinzhengjie/ ============
/home/yinzhengjie/
å‘½ä»¤æ‰§è¡ŒæˆåŠŸ
============= node102.yinzhengjie.org.cn : ls -d /home/yinzhengjie/ ============
/home/yinzhengjie/
å‘½ä»¤æ‰§è¡ŒæˆåŠŸ
============= node103.yinzhengjie.org.cn : ls -d /home/yinzhengjie/ ============
/home/yinzhengjie/
å‘½ä»¤æ‰§è¡ŒæˆåŠŸ
[root@node101 ~]# 

```

### ç¼–å†™é›†ç¾¤åŒæ­¥é…ç½®æ–‡ä»¶çš„è„šæœ¬

è¿™ä¸ªè„šæœ¬ä¸ä¹‹å‰çš„è„šæœ¬çš„åŒºåˆ«å°±åœ¨äºè„šæœ¬ä¸­åªå¯¹åé¢ä¸¤ä¸ªä»èŠ‚ç‚¹è¿›è¡Œäº†é…ç½®ã€‚

```
[root@node101 ~]# vi /usr/local/bin/xrsync.sh
[root@node101 ~]# 
[root@node101 ~]# 
[root@node101 ~]# chmod +x /usr/local/bin/xrsync.sh
[root@node101 ~]# 
[root@node101 ~]# 
[root@node101 ~]# more `which xrsync.sh`
#!/bin/bash
#@author :yinzhengjie
#blog:http://www.cnblogs.com/yinzhengjie
#EMAIL:y1053419035@qq.com

#åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ä¼ å‚
if [ $# -lt 1 ];then
    echo "è¯·è¾“å…¥å‚æ•°";
    exit
fi


#è·å–æ–‡ä»¶è·¯å¾„
file=$@

#è·å–å­è·¯å¾„
filename=`basename $file`

#è·å–çˆ¶è·¯å¾„
dirpath=`dirname $file`

#è·å–å®Œæ•´è·¯å¾„
cd $dirpath
fullpath=`pwd -P`

#åŒæ­¥æ–‡ä»¶åˆ°DataNode
for (( i=102;i<=103;i++ ))
do
    #ä½¿ç»ˆç«¯å˜ç»¿è‰² 
    tput setaf 2
    echo =========== node${i}.yinzhengjie.org.cn : $file ===========
    #ä½¿ç»ˆç«¯å˜å›åŸæ¥çš„é¢œè‰²ï¼Œå³ç™½ç°è‰²
    tput setaf 7
    #è¿œç¨‹æ‰§è¡Œå‘½ä»¤
    rsync -lr $filename `whoami`@node${i}.yinzhengjie.org.cn:$fullpath
    #åˆ¤æ–­å‘½ä»¤æ˜¯å¦æ‰§è¡ŒæˆåŠŸ
    if [ $? == 0 ];then
        echo "å‘½ä»¤æ‰§è¡ŒæˆåŠŸ"
    fi
done
```

## é…ç½®javaç¯å¢ƒ

ä¸‰ä¸ªæœºå­éƒ½éœ€è¦é…ç½®javaç¯å¢ƒã€‚å…³äºå¦‚ä½•ä¸‹è½½è€ç‰ˆæœ¬çš„javaé“¾æ¥å¦‚ä¸‹[Java Archive Downloads - Java SE 8 (oracle.com)](https://www.oracle.com/java/technologies/javase/javase8-archive-downloads.html)

ä½†æ˜¯å®‰è£…çš„è¿‡ç¨‹ä¸­å‡ºç°äº†æŠ¥é”™

```
java: error while loading shared libraries: libjli.so: cannot open shared object file: No such file or directory
```

åŸå› åº”è¯¥æ˜¯åœ¨è§£å‹`jdk-8u181-linux-x64.tar.gz`çš„æ—¶å€™ï¼Œç”±äºjdkæ–‡ä»¶è¿‡å¤§ï¼Œç›´æ¥æ‹–å…¥è™šæ‹Ÿæœºçš„æ—¶å€™é€ æˆäº†æ–‡ä»¶çš„æŸåï¼Œæ‰€ä»¥è§£å†³æ–¹æ¡ˆè§[(linuxè§£å‹å‡ºé”™ å½’æ¡£æ–‡ä»¶ä¸­å¼‚å¸¸çš„ EOF æ–‡ä»¶ä¸å®Œæ•´_liangliang233çš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/liangliang233/article/details/105968513/?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_title-0&spm=1001.2101.3001.4242)ä¹‹åå°±å¯ä»¥äº†ã€‚é‡æ–°å®‰è£…ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚

## å®‰è£…CM

ç”±äºæœ€è¿‘CMçš„å®˜ç½‘è¦æ±‚ä¸‹è½½ç›¸å…³æ–‡ä»¶éœ€è¦è´­ä¹°ï¼Œæ‰€ä»¥ç‰¹æ­¤æ‰¾äº†ä¸€ä¸ªæœ‰ç™¾åº¦ç½‘ç›˜çš„ä¸‹è½½æ•™ç¨‹[Centos7ç¦»çº¿å®‰è£…Cloudera Manager 5.14.1 - äº‘+ç¤¾åŒº - è…¾è®¯äº‘ (tencent.com)](https://cloud.tencent.com/developer/article/1185607)ä½†ä¸»è¦çš„æµç¨‹è¿˜æ˜¯è·Ÿç€ä¹‹å‰çš„æ¥çš„ï¼Œåªæ˜¯ä¸­é—´æ¢äº†ä¸€äº›æ­¥éª¤ã€‚

ä¸»è¦è®°å½•ä¸€ä¸‹rpmçš„å®‰è£…æ–¹å¼ã€‚

æŒ‰ç…§[ CDH5.16.1é‡‡ç”¨rpm+httpæ–¹å¼ç¦»çº¿éƒ¨ç½²ï¼ˆå›¾è§£è¯¦ç»†æµç¨‹ï¼‰_é˜¿é¡¾çš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/u010452388/article/details/102822956?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_title-0&spm=1001.2101.3001.4242)è¿™ç¯‡åšå®¢è¿›è¡Œçš„ã€‚å…¶ä¸­æ•°æ®åº“çš„é…ç½®éƒ¨åˆ†å…¶ä¸­ç»¼åˆäº†ä¸¤ç¯‡æ–‡ç« çš„å…±åŒéƒ¨åˆ†ã€‚

## åˆ†åŒºæ‰©å®¹

linuxçš„åˆ†åŒºå¦‚ä½•æ‰©å®¹å¯ä»¥å‚è€ƒè¿™ä¸€ç¯‡[åšå®¢](https://zhuanlan.zhihu.com/p/83340525)ã€‚åœ¨æ“ä½œçš„è¿‡ç¨‹ä¸­éœ€è¦å¯¹éƒ¨åˆ†çš„åˆ†åŒºè¿›è¡Œæ‰©å®¹ã€‚

æœ€åæˆåŠŸæ­å»ºäº†Cloudera-Managerç¯å¢ƒï¼Œä½†æ˜¯ç”±äºè™šæ‹Ÿæœºçš„å†…å­˜ä¸å¤Ÿï¼Œæ€ä¹ˆè¿è¡Œéƒ½å¾ˆå¡ã€‚æ‰€ä»¥è‡³æ­¤ï¼Œåˆ‡æ¢äº†ç ”ç©¶çš„æ€è·¯ã€‚æ‰“ç®—è‡ªå·±æ­å»ºå¤§æ•°æ®ç¯å¢ƒäº†ã€‚

# Sparkç”µå•†å®æˆ˜é¡¹ç›®

è¿™ä¸€éƒ¨åˆ†çš„å†…å®¹æ˜¯æ ¹æ®[Sparkå¤§å‹ç”µå•†é¡¹ç›®å®æˆ˜_Erik_lyçš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/u012318074/category_6744423.html)è¿›è¡Œçš„ã€‚

## å¸¸ç”¨çš„å‘½ä»¤

åœ¨è¿™ä¹‹å‰å…ˆè®°å½•å¸¸ç”¨çš„å‘½ä»¤

> - å¯åŠ¨mysql
>
> ```
> service mysql start
> service mysql status   #éªŒè¯
> ```
>
> - å¯åŠ¨zookeeper
>
> ```
> zkServer.sh start    #æ¯ä¸ªèŠ‚ç‚¹éƒ½è¦æ‰§è¡Œ
> ```
>
> - å¯åŠ¨hdfs
>
> ```
> start-dfs.sh   #åœ¨ä¸»æœºä¸Šè¿è¡Œ
> jps   #åœ¨ä¸‰å°æœºå­ä¸Šä½¿ç”¨jpsæŸ¥çœ‹
> ```
>
> - å¯åŠ¨yarné›†ç¾¤
>
> ```
> start-yarn.sh    #hadoop01å¯åŠ¨start-yarn.sh
> yarn-daemon.sh start resourceManager   #hadoop02ã€3æ‰‹åŠ¨å¯åŠ¨ResourceManager
> ```
>
> - æ›´æ”¹hdfsä¸­çš„æ–‡ä»¶çš„æ‰€å±ç”¨æˆ·
>
> ```
> sudo -u hdfs hdfs dfs -chown root /user/root
> ```
>
> - è·å–hdfsçš„æ­£ç¡®ç«¯å£å·
>
> ```
> hdfs getconf -confKey fs.default.name
> ```
>
> 

## åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å¸¸è§çš„é—®é¢˜

è¿™ä¸€éƒ¨åˆ†ä»‹ç»é¡¹ç›®åœ¨è¿›è¡Œå’Œä½¿ç”¨çš„è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜ã€‚

### å¯åŠ¨hadoopé›†ç¾¤çš„æ—¶å€™æ²¡æœ‰namenode

åœ¨ä¸»æœºçš„ç»ˆç«¯ä½¿ç”¨`start-all.sh`ä¹‹åï¼Œä½¿ç”¨jpsæŸ¥çœ‹ï¼Œå‘ç°ç»“æœå¦‚ä¸‹

```shell
[root@sun sun]# jps
3270 QuorumPeerMain
7159 SecondaryNameNode
2295 Main
7310 ResourceManager
7582 Jps
3215 AlertPublisher
3311 DataNode
```

ä¸»è¦æ ¹æ®è¿™ç¯‡æ–‡ç« è¿›è¡Œä¿®æ”¹[å®Œç¾è§£å†³Hadoopé›†ç¾¤æ— æ³•æ­£å¸¸å…³é—­çš„é—®é¢˜!_AliceèŒçš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/weixin_44318830/article/details/104339471)å’Œ[hadoop å…³é—­datanodeèŠ‚ç‚¹æ—¶å‘ç”Ÿå¼‚å¸¸ï¼šno datanode to stop_åˆ†äº«æˆ‘çš„ç‚¹ç‚¹æ»´æ»´ï¼Œåœ¨æˆé•¿è·¯ä¸Šä¸ä½ åŒè¡Œï¼-CSDNåšå®¢](https://blog.csdn.net/hlx20080808/article/details/56670886)

### hadoopæ²¡æœ‰åŠæ³•æ­£å¸¸å…³é—­

åœ¨è¿›è¡Œ`stop-all.sh`çš„æ—¶å€™ï¼Œæ˜¾ç¤ºçš„æ˜¯

```shell
[root@master ~]# stop-dfs.sh
Stopping namenodes on [master]
master: no namenode to stop
slave2: no datanode to stop
slave1: no datanode to stop
â€¦
```

è¿™ä¸ªé—®é¢˜çš„å‡ºç°æ˜¯ç”±äºhadoopé›†ç¾¤å…³é—­çš„æ—¶å€™ï¼ŒNamenodeæˆ–è€…DataNodeçš„pidæ–‡ä»¶æ‰¾ä¸ç€ã€‚æ‰€ä»¥å°±éœ€è¦å¼ºåˆ¶å…³é—­hadoopï¼Œå³ä½¿ç”¨`kill -9 pid`.ä½†æ˜¯åœ¨ä½¿ç”¨è¿™ä¸ªå‘½ä»¤å…³é—­datanodeçš„æ—¶å€™æ€»æ˜¯ä¼šæœ‰æ–°çš„datanodeè¿›ç¨‹è¢«åˆ›å»ºï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å‘½ä»¤`cd /proc/pid`å’Œ`cat status`å¯¹è¿™ä¸ªè¿›è¡Œçš„çˆ¶è¿›ç¨‹è¿›è¡ŒæŸ¥çœ‹ï¼Œkillæ‰çˆ¶è¿›ç¨‹ï¼Œä½†æ˜¯å‘ç°ä¸€ä¼šåˆåˆ›å»ºå‡ºæ¥äº†datanodeã€‚

æ‰€ä»¥éœ€è¦å…ˆä½¿ç”¨å‘½ä»¤

```shell
find -name dfs
```

ï¼Œæ‰¾åˆ°æ‰€æœ‰çš„dfsæ–‡ä»¶ï¼Œä¹‹åå°†é™¤äº†eclipseåé¢çš„é‚£ä¸ªéƒ½åˆ é™¤ï¼Œä¹‹åå†åˆ é™¤`/tmp`ç›®å½•ä¸­çš„ä¸€äº›æ–‡ä»¶

```shell
[root@sun2 tmp]# rm -rf hsperfdata*
[root@sun2 tmp]# rm -rf hadoop*
[root@sun2 tmp]# rm -rf yarn*
```

ä¹‹åå†ä½¿ç”¨`jps`è¿›è¡ŒæŸ¥çœ‹ï¼Œå°±å‘ç°éƒ½æ²¡æœ‰äº†ã€‚

ä¹‹åéœ€è¦ä¿®æ”¹pidæ–‡ä»¶çš„ç›®å½•ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­$HADOOP_HOME/conf/hadoop-env.shä¸­æ·»åŠ å¦‚ä¸‹ï¼Œ

```shell
export HADOOP_PID_DIR=${HADOOP_HOME}/pids
```

### hadoopé…ç½®æ–‡ä»¶

ä¿®æ”¹masterä¸»æœºä¿®æ”¹Hadoopå¦‚ä¸‹é…ç½®æ–‡ä»¶ï¼Œè¿™äº›é…ç½®æ–‡ä»¶éƒ½ä½äº/usr/local/hadoop/etc/hadoopç›®å½•ä¸‹ã€‚
ä¿®æ”¹slavesï¼š
è¿™é‡ŒæŠŠDataNodeçš„ä¸»æœºåå†™å…¥è¯¥æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ªã€‚è¿™é‡Œè®©masterèŠ‚ç‚¹ä¸»æœºä»…ä½œä¸ºNameNodeä½¿ç”¨ã€‚

```shell
sun2
sun3
```

ä¿®æ”¹core-site.xmlï¼Œå…¶ä¸­`hadoop.tmp.dir`ä¸æ˜¯ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œæ˜¯å­˜æ”¾æ‰€æœ‰hadoopä¸­æ•°æ®çš„æ–‡ä»¶ï¼Œå…¶ç›®å½•åœ°å€ä¸ºï¼š`file:/usr/local/hadoop/tmp`ã€‚`fs.default.name`

```xml
<configuration>
      <property>
          <name>hadoop.tmp.dir</name>
          <value>file:/usr/local/hadoop/tmp</value>
          <description>Abase for other temporary directories.</description>
      </property>
      <property>
          <name>fs.defaultFS</name>
          <value>hdfs://master:9000</value>
      </property>
  </configuration>
```

ä¿®æ”¹hdfs-site.xml

```xml
<configuration>
        <property>
                <name>dfs.name.dir</name>
                <value>/usr/local/hadoop/data/namenode</value>
        </property>
        <property>
                <name>dfs.data.dir</name>
                <value>/usr/local/hadoop/data/datanode</value>
        </property>
        <property>
                <name>dfs.tmp.dir</name>
                <value>/usr/local/hadoop/data/tmp</value>
        </property>
        <property>
                <name>dfs.replication</name>
                <value>3</value>
        </property>
        <property>
                    <name>dfs.namenode.http.address</name>
                   <value>192.168.220.101:50070</value>
        </property>
</configuration>
```

`dfs.name.dir`è¿™ä¸ªå‚æ•°ç”¨äºç¡®å®šå°†HDFSæ–‡ä»¶ç³»ç»Ÿçš„**å…ƒä¿¡æ¯ä¿å­˜**åœ¨ä»€ä¹ˆç›®å½•ä¸‹ã€‚

`dfs.data.dir`è¿™ä¸ªå‚æ•°ç”¨äºç¡®å®šå°†**HDFSæ–‡ä»¶ç³»ç»Ÿçš„æ•°æ®ä¿å­˜**åœ¨ä»€ä¹ˆç›®å½•ä¸‹ã€‚

## ç¯å¢ƒæ­å»º

å› ä¸ºåœ¨ä¹‹å‰é…ç½®è¿‡äº†è™šæ‹Ÿæœºçš„IPåœ°å€ï¼Œæ‰€ä»¥è¿™é‡Œç›´æ¥å°±è¿›è¡Œhadoopç­‰ç¯å¢ƒçš„é…ç½®äº†ã€‚å…·ä½“ç»†èŠ‚è§åŸåšå®¢ï¼Œæˆ‘åªè¯´æ˜å…¶ä¸­å‡ºé—®é¢˜çš„éƒ¨åˆ†ã€‚

> åœ¨åŸåšå®¢ä¸­çš„å¯¹pathç¯å¢ƒå˜é‡è¿›è¡Œè®¾ç½®çš„æ—¶å€™éƒ½ç¼ºå°‘å¯¹åŸå§‹pathçš„å¼•ç”¨ï¼Œä¸€å®šè¦æ³¨æ„ã€‚

åœ¨linuxä¸­è¿è¡Œmysqlçš„å‘½ä»¤æ˜¯

```
 mysql -u root -p
```

### hiveå®‰è£…

åœ¨hiveçš„å®‰è£…è¿‡ç¨‹ä¸­ï¼Œé…ç½®`hive-site.xml`ä¹‹åå¯åŠ¨hiveï¼Œå‡ºç°æŠ¥é”™ï¼Œæ‰€ä»¥å°†ç™¾åº¦ç½‘ç›˜ä¸­çš„`hive-site.xml`å¤åˆ¶è¿›è™šæ‹Ÿæœºä¸­ ï¼Œè¿›è¡Œæ›¿æ¢ã€‚

> #### Linuxä¸­ä½¿ç”¨vimè¿›è¡Œå•è¯æŸ¥æ‰¾çš„æ“ä½œ
>
> ä»å¼€å¤´æœç´¢
>
> åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œè¾“å…¥/ä½ è¦æŸ¥æ‰¾çš„å­—ç¬¦
>
> æŒ‰ä¸‹å›è½¦ï¼Œå¯ä»¥çœ‹åˆ°vimæŠŠå…‰æ ‡ç§»åŠ¨åˆ°è¯¥å­—ç¬¦å¤„
>
> å†æŒ‰nï¼ˆå°å†™ï¼‰æŸ¥çœ‹ä¸‹ä¸€ä¸ªåŒ¹é…
>
> æŒ‰N(å¤§å†™ï¼‰æŸ¥çœ‹ä¸Šä¸€ä¸ªåŒ¹é…ï¼ˆcapslockåˆ‡æ¢å¤§å°å†™ï¼Œä¹Ÿå¯ä»¥åœ¨å°å†™çŠ¶æ€ä¸‹æŒ‰shift+nï¼‰
>
>  
>
> ä»ç»“å°¾å¤„æœç´¢
>
> ï¼Ÿè¦æœç´¢çš„å­—ç¬¦ä¸²æˆ–å­—ç¬¦

ä¹‹ååœ¨ä½¿ç”¨hiveåˆ›å»ºè¡¨æ ¼çš„æ—¶å€™å‡ºç°äº†æŠ¥é”™

> FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask. MetaException(message:Got exception: java.io.IOException Failed on local exception: com.google.protobuf.InvalidProtocolBufferException: Protocol message end-group tag did not match expected tag.; Host Details : local host is: "sun/192.168.220.101"; destination host is: "sun":9000; )

è¿™é‡Œéœ€è¦å…ˆä¿®æ”¹ä¸€ä¸‹ä¹‹å‰çš„`hive-site.xml`æ–‡ä»¶ã€‚

```
<property>
  <name>javax.jdo.option.ConnectionURL</name>
  <value>jdbc:mysql://192.168.220.101:3306/hive_metadata?serverTimezone=GMT</value>
  <description>JDBC connect string for a JDBC metastore</description>
</property>
```

æ•°æ®åº“è¿æ¥çš„éƒ¨åˆ†å¦‚ä¸Šä¿®æ”¹ã€‚ä¹‹ååœ¨`hive`çš„`bin`ç›®å½•ä¸‹è¿è¡Œ

```
./schematool -dbType mysql -initSchema
```

æˆåŠŸä¹‹åå³å¯è¿›è¡Œä¸‹ä¸€æ­¥ã€‚

ä½†æ˜¯åœ¨åˆ›å»ºè¡¨æ ¼çš„æ—¶å€™ç»§ç»­æŠ¥é”™ã€‚äºæ˜¯ä½¿ç”¨å‘½ä»¤ `hive -hiveconf hive.root.logger=DEBUG,console\`å¯¹hiveå†…çš„å†…å®¹è¿›è¡Œæ‰“å°ã€‚æŠ¥é”™å¦‚ä¸‹

```
ERROR ql.Driver: FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask. MetaException(message:Got exception: org.apache.hadoop.security.AccessControlException Permission denied: user=root, access=WRITE, inode="/user":hdfs:supergroup:drwxr-xr-x
```

è¿™ä¸ªæ ·å­åº”è¯¥æ˜¯åœ¨hadoopä¸­æ²¡æœ‰ç»™rootç”¨æˆ·é…ç½®æƒé™ã€‚å®šç›ä¸€çœ‹ã€‚å‘ç°åœ¨hdfsä¸­çš„userç›®å½•ä¸‹éƒ½æ²¡æœ‰rootç”¨æˆ·ã€‚æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ã€‚

```
sudo -u hdfs hadoop fs -mkdir /user/root     #åœ¨hdfsä¸­åˆ›å»ºrootç”¨æˆ·
hadoop fs -chmod 777 /user/root              #ç»™rootç”¨æˆ·é…ç½®æƒé™
```

ä¹‹åå°±å¯ä»¥åœ¨hiveä¸­åˆ›å»ºè¡¨æ ¼äº†ã€‚ä¹‹åä¸Šä¼ `users.txt`æ–‡ä»¶åˆ°`/usr/local`çš„è¿‡ç¨‹ä¸­ä¸çŸ¥é“ä¸ºä»€ä¹ˆæ˜¾ç¤ºçš„usersè¡¨ä¸­çš„å†…å®¹éƒ½æ˜¯nullã€‚ä½†æ˜¯ç»è¿‡å…¶ä»–çš„æ•™ç¨‹æ¥çœ‹é—®é¢˜åº”è¯¥ä¸å¤§ï¼Œæ‰€ä»¥å…ˆä¸ç®¡ä»–ã€‚

### zookeeperé›†ç¾¤å®‰è£…

æŒ‰ç…§æ–‡ç« çš„æ­¥éª¤è¿›è¡Œï¼Œæ²¡æœ‰å‡ºç°é—®é¢˜ã€‚

### kafkaå®‰è£…

æŒ‰ç…§æ–‡ç« çš„æ­¥éª¤è¿›è¡Œï¼Œæ²¡æœ‰å‡ºç°é—®é¢˜

### flumeå®‰è£…

åœ¨flumeçš„å®‰è£…è¿‡ç¨‹ä¸­å‡ºç°äº†é—®é¢˜ï¼Œå…¶ä¸­éœ€è¦æŠŠ9000çš„ç«¯å£å·æ”¹æˆ8020

### Sparkå®‰è£…

æŒ‰ç…§æ–‡ç« çš„æ­¥éª¤å¯ä»¥è¿›è¡Œå®‰è£…ï¼Œä½†æ˜¯åœ¨è¿›è¡Œsparkä½œä¸šæäº¤çš„æ—¶å€™ä¼šå‡ºç°æŠ¥é”™ï¼ŒæŠ¥é”™å¦‚ä¸‹

> java.lang.OutOfMemoryError: Java heap space
>
> sparkå¤„ç†æ•°æ®çš„æ—¶å€™é‡åˆ°å†…å­˜ä¸è¶³çš„æŠ¥é”™





### MySQLåŠå®¢æˆ·ç«¯å®‰è£…

è¿™é‡Œéƒ½æ˜¯åœ¨è‡ªå·±çš„windowsç¯å¢ƒä¸­è¿›è¡Œé…ç½®çš„ï¼Œç”±äºè¿™ä¸€éƒ¨åˆ†æ¯”è¾ƒå ç”¨å†…å­˜ï¼Œæ‰€ä»¥å…ˆä¸è¿›è¡Œæ“ä½œ

### ç¯å¢ƒæ­å»º-Mavenå®‰è£…åŠé…ç½®idea

ç°åœ¨å¤§éƒ¨åˆ†çš„å¼€å‘éƒ½æ˜¯ä½¿ç”¨ideaäº†ï¼Œæ‰€ä»¥è¿™é‡Œçš„å¼€å‘ç¯å¢ƒä¹Ÿé€‰æ‹©ideaäº†ã€‚å‚è€ƒçš„åšå®¢æ˜¯[ä½¿ç”¨IntelliJ IDEA é…ç½®Mavenï¼ˆå…¥é—¨ï¼‰_è®°äº‹æœ¬-CSDNåšå®¢_ideaé…ç½®maven](https://blog.csdn.net/qq_32588349/article/details/51461182)

#### ä¸‹è½½mavençº§é…ç½®

ç°åœ¨çš„åœ°å€åœ¨[Index of /dist/maven/maven-3/3.3.9/binaries (apache.org)](https://archive.apache.org/dist/maven/maven-3/3.3.9/binaries/)ï¼Œ







